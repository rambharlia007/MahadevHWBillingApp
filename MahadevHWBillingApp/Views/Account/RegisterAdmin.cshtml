
@{
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}
<style>
    #logreg-forms {
        width: 412px;
        margin: 10vh auto;
        background-color: #f3f3f3;
        box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        transition: all 0.3s cubic-bezier(.25,.8,.25,1);
    }

        #logreg-forms form {
            width: 100%;
            max-width: 410px;
            padding: 15px;
            margin: auto;
        }

        #logreg-forms .form-control {
            position: relative;
            box-sizing: border-box;
            height: auto;
            padding: 10px;
            font-size: 16px;
        }

            #logreg-forms .form-control:focus {
                z-index: 2;
            }

        #logreg-forms .form-signin input[type="email"] {
            margin-bottom: -1px;
            border-bottom-right-radius: 0;
            border-bottom-left-radius: 0;
        }

        #logreg-forms .form-signin input[type="password"] {
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }

        #logreg-forms .social-login {
            width: 390px;
            margin: 0 auto;
            margin-bottom: 14px;
        }

        #logreg-forms .social-btn {
            font-weight: 100;
            color: white;
            width: 190px;
            font-size: 0.9rem;
        }

        #logreg-forms a {
            display: block;
            padding-top: 10px;
            color: lightseagreen;
        }

    #logreg-form .lines {
        width: 200px;
        border: 1px solid red;
    }


    #logreg-forms button[type="submit"] {
        margin-top: 10px;
    }

    #logreg-forms .facebook-btn {
        background-color: #3C589C;
    }

    #logreg-forms .google-btn {
        background-color: #DF4B3B;
    }

    #logreg-forms .form-reset {
        display: none;
    }

    #logreg-forms .form-signup .social-btn {
        width: 210px;
    }

    #logreg-forms .form-signup input {
        margin-bottom: 2px;
    }

    .form-signup .social-login {
        width: 210px !important;
        margin: 0 auto;
    }

    @@media screen and (max-width:500px) {
        #logreg-forms {
            width: 300px;
        }

            #logreg-forms .social-login {
                width: 200px;
                margin: 0 auto;
                margin-bottom: 10px;
            }

            #logreg-forms .social-btn {
                font-size: 1.3rem;
                font-weight: 100;
                color: white;
                width: 200px;
                height: 56px;
            }

                #logreg-forms .social-btn:nth-child(1) {
                    margin-bottom: 5px;
                }
    }
</style>

<div id="logreg-forms">

    <div style="margin-top:20px;">
        <div class="alert alert-success alert-dismissible fade show" role="alert" v-cloak v-show="alertMessage" style="margin-top: 20px;">
            {{alertMessage}}
            <button type="button" class="close" v-on:click="closeAlertMessage('alertMessage')" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div v-cloak class="alert alert-danger alert-dismissible fade show" role="alert" v-show="alertFailureMessage" style="margin-top: 20px;">
            {{alertFailureMessage}}
            <button type="button" class="close" v-on:click="closeAlertMessage('alertFailureMessage')" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card justify-content-center">
                <div class="card-body" style="font-size:14px;">
                    <div class="form-group row">
                        <label class="col-md-2">Name</label>
                        <div class="col-md-10">
                            <input type="text" class="form-control" v-model="user.Name">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-2">Password</label>
                        <div class="col-md-10">
                            <input type="password" class="form-control" v-model="user.Password">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-2">Confirm Password</label>
                        <div class="col-md-10">
                            <input type="password" class="form-control" v-model="user.ConfirmPassword">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-2">Master Password</label>
                        <div class="col-md-10">
                            <input type="password" class="form-control" v-model="user.MasterPassword">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-10 offset-2">
                            <button class="btn btn-success btn-sm" v-on:click="register()">Register</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
  </div>

<script>
    $(document).ready(function () {
        var obj = {
            alertFailureMessage: "",
            alertMessage: "",
            user: {
                Name: "",
                Password: "",
                ConfirmPassword: "",
                MasterPassword: ""
            }
        }
        new Vue({
            el: '#logreg-forms',
            data: obj,
            methods: {
                showLoginForm: function (value) {
                    this.isLogin = value;
                },
                register: function (e) {
                    var self = this;
                    if (self.user.Password && self.user.Password !== self.user.ConfirmPassword) {
                        self.alertFailureMessage = "Password not mactching";
                        return;
                    }

                    var endPoint = "/Account/Register";
                    $.post(endPoint,
                        self.user,
                        function (res) {
                            if (res.Status === "Success")
                                window.location.href = res.Link;
                            else
                                self.alertMessage = res.Message;
                        }).fail(function (res) {
                            self.alertFailureMessage = res.Message;
                        });
                },
                closeAlertMessage: function (property) {
                    // set alert message to empty
                    this[property] = "";
                },
            }
        });
    });
</script>
